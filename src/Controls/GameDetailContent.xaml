<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:controls="clr-namespace:MauiStream.Controls"
             x:Class="MauiStream.Controls.GameDetailContent"
             x:DataType="controls:GameDetailContent">

    <VerticalStackLayout Padding="15" Spacing="16" VerticalOptions="Center">
        
        <!-- Large Game Image with Tags Overlay -->
        <Border StrokeThickness="0" HeightRequest="180" IsVisible="{Binding ShowImage}">
            <Border.StrokeShape>
                <RoundRectangle CornerRadius="12"/>
            </Border.StrokeShape>
            <Grid>
                <Image Source="{Binding Game.ImageUrl}" Aspect="AspectFill"/>
                
                <!-- Tags Overlay on Image (same style as StorePage) -->
                <ScrollView Orientation="Horizontal"
                            HorizontalScrollBarVisibility="Never"
                            VerticalOptions="Start"
                            Padding="12,12,12,0"
                            IsVisible="{Binding ShowTags}">
                    <HorizontalStackLayout Spacing="8"
                                           BindableLayout.ItemsSource="{Binding Game.Tags}">
                        <BindableLayout.ItemTemplate>
                            <DataTemplate x:DataType="x:String">
                                <Border BackgroundColor="#88000000"
                                        StrokeThickness="0"
                                        Padding="12,6">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="14"/>
                                    </Border.StrokeShape>
                                    <Label Text="{Binding .}"
                                           TextColor="White"
                                           FontSize="12"/>
                                </Border>
                            </DataTemplate>
                        </BindableLayout.ItemTemplate>
                    </HorizontalStackLayout>
                </ScrollView>
            </Grid>
        </Border>
        
        <Label Text="{Binding Game.Title}"
               TextColor="White"
               FontSize="24"
               FontAttributes="Bold"
               IsVisible="{Binding ShowTitle}"/>
        
        <!-- Platform Icons -->
        <HorizontalStackLayout Spacing="12">
            <!-- Windows -->
            <Grid WidthRequest="20" HeightRequest="20" IsVisible="{Binding Game.HasWindows}">
                <Path Data="M0,0 L11,0 L11,11 L0,11 Z M12,0 L24,0 L24,11 L12,11 Z M0,12 L11,12 L11,24 L0,24 Z M12,12 L24,12 L24,24 L12,24 Z"
                      Fill="{StaticResource SteamTextDark}"
                      Aspect="Uniform"
                      HorizontalOptions="Center"
                      VerticalOptions="Center"/>
            </Grid>
            <!-- Mac -->
            <Grid WidthRequest="20" HeightRequest="20" IsVisible="{Binding Game.HasMac}">
                <Path Data="M18.71,19.5 C17.88,20.74 17,21.95 15.66,21.97 C14.32,22 13.89,21.18 12.37,21.18 C10.84,21.18 10.37,21.95 9.1,22 C7.79,22.05 6.8,20.68 5.96,19.47 C4.25,17 2.94,12.45 4.7,9.39 C5.57,7.87 7.13,6.91 8.82,6.88 C10.1,6.86 11.32,7.75 12.11,7.75 C12.89,7.75 14.37,6.68 15.92,6.84 C16.57,6.87 18.39,7.1 19.56,8.82 C19.47,8.88 17.39,10.1 17.41,12.63 C17.44,15.65 20.06,16.66 20.09,16.67 C20.06,16.74 19.67,18.11 18.71,19.5 Z M13,3.5 C13.73,2.67 14.94,2.04 15.94,2 C16.07,3.17 15.6,4.35 14.9,5.19 C14.21,6.04 13.07,6.7 11.95,6.61 C11.8,5.46 12.36,4.26 13,3.5 Z"
                      Fill="{StaticResource SteamTextDark}"
                      Aspect="Uniform"
                      HorizontalOptions="Center"
                      VerticalOptions="Center"/>
            </Grid>
            <!-- Linux -->
            <Grid WidthRequest="20" HeightRequest="20" IsVisible="{Binding Game.HasLinux}">
                <Path Data="M12.504 0c-.155 0-.315.008-.48.021-4.226.333-3.105 4.807-3.17 6.298-.076 1.092-.3 1.953-1.05 3.02-.885 1.051-2.127 2.75-2.716 4.521-.278.832-.41 1.684-.287 2.489a.424.424 0 00-.11.135c-.26.268-.45.6-.663.839-.199.199-.485.267-.797.4-.313.136-.658.269-.864.68-.09.189-.136.394-.132.602 0 .199.027.4.055.536.058.399.116.728.04.97-.249.68-.28 1.145-.106 1.484.174.334.535.47.94.601.81.2 1.91.135 2.774.6.926.466 1.866.67 2.616.47.526-.116.97-.464 1.208-.946.587-.003 1.23-.269 2.26-.334.699-.058 1.574.267 2.577.2.025.134.063.198.114.333l.003.003c.391.778 1.113 1.132 1.884 1.071.771-.06 1.592-.536 2.257-1.306.631-.765 1.683-1.084 2.378-1.503.348-.199.629-.469.649-.853.023-.4-.2-.811-.714-1.376v-.097l-.003-.003c-.17-.2-.25-.535-.338-.926-.085-.401-.182-.786-.492-1.046h-.003c-.059-.054-.123-.067-.188-.135a.357.357 0 00-.19-.064c.431-1.278.264-2.55-.173-3.694-.533-1.41-1.465-2.638-2.175-3.483-.796-1.005-1.576-1.957-1.56-3.368.026-2.152.236-6.133-3.544-6.139zm.529 3.405h.013c.213 0 .396.062.584.198.19.135.33.332.438.533.105.259.158.459.166.724 0-.02.006-.04.006-.06v.105a.086.086 0 01-.004-.021l-.004-.024a1.807 1.807 0 01-.15.706.953.953 0 01-.213.335.71.71 0 00-.088-.042c-.104-.045-.198-.064-.284-.133a1.312 1.312 0 00-.22-.066c.05-.06.146-.133.183-.198.053-.128.082-.264.088-.402v-.02a1.21 1.21 0 00-.061-.4c-.045-.134-.101-.2-.183-.333-.084-.066-.167-.132-.267-.132h-.016c-.093 0-.176.03-.262.132a.8.8 0 00-.205.334 1.18 1.18 0 00-.09.468v.018c.016.264.086.468.158.603.09.135.168.2.269.27v.066c-.093.2-.16.333-.553.333-.31-.003-.652-.136-.653-.334v-.197a1.391 1.391 0 01.075-.484c.063-.194.141-.398.232-.468.096-.135.269-.267.373-.335.02-.013.033-.013.053-.033.12-.135.16-.136.28-.271a.96.96 0 00.098-.2z"
                      Fill="{StaticResource SteamTextDark}"
                      Aspect="Uniform"
                      HorizontalOptions="Center"
                      VerticalOptions="Center"/>
            </Grid>
        </HorizontalStackLayout>
        
        <Label Text="{Binding Game.Description}"
               TextColor="{StaticResource SteamTextDark}"
               FontSize="14"
               MaxLines="3"
               LineBreakMode="TailTruncation"/>
        
        <Label Text="{Binding Game.Price, StringFormat='${0:F2} USD'}"
               TextColor="White"
               FontSize="22"
               FontAttributes="Bold"
               Margin="0,8,0,0"/>
        
        <Button Text="Add to Cart"
                BackgroundColor="{StaticResource SteamGreen}"
                TextColor="White"
                FontSize="16"
                FontAttributes="Bold"
                CornerRadius="6"
                Padding="16,12"
                HeightRequest="50"/>
        
        <Button Text="Add to Wishlist"
                BackgroundColor="{StaticResource SteamSearchBackground}"
                TextColor="{StaticResource SteamTextLight}"
                FontSize="14"
                CornerRadius="6"
                Padding="16,10"
                HeightRequest="44"/>
        
        <!-- Similar Games Section -->
        <Label Text="More like this"
               TextColor="{StaticResource SteamTextLight}"
               FontSize="16"
               FontAttributes="Bold"
               Margin="0,12,0,4"
               IsVisible="{Binding ShowMoreLikeThis}"/>
        
        <Grid ColumnDefinitions="*,*,*" ColumnSpacing="8" IsVisible="{Binding ShowMoreLikeThis}">
            <Border Grid.Column="0" HeightRequest="70" StrokeThickness="0">
                <Border.StrokeShape><RoundRectangle CornerRadius="8"/></Border.StrokeShape>
                <Image Source="https://cdn.cloudflare.steamstatic.com/steam/apps/1245620/header.jpg" Aspect="AspectFill"/>
            </Border>
            <Border Grid.Column="1" HeightRequest="70" StrokeThickness="0">
                <Border.StrokeShape><RoundRectangle CornerRadius="8"/></Border.StrokeShape>
                <Image Source="https://cdn.cloudflare.steamstatic.com/steam/apps/1091500/header.jpg" Aspect="AspectFill"/>
            </Border>
            <Border Grid.Column="2" HeightRequest="70" StrokeThickness="0">
                <Border.StrokeShape><RoundRectangle CornerRadius="8"/></Border.StrokeShape>
                <Image Source="https://cdn.cloudflare.steamstatic.com/steam/apps/1174180/header.jpg" Aspect="AspectFill"/>
            </Border>
        </Grid>
    </VerticalStackLayout>

</ContentView>
